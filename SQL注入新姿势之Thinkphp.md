**前言**
平时我们挖洞遇到的SQL注入都是在参数后面添加引号发现报错，但是很少人去测试路径中比如/1.html中的参数1，今天倒是终于让我遇到了
**一起来看一下**
首先，访问的链接是：http://localhost:8080/id/325.html，此时页面正常回显
然后好奇的态度在325后面加了个单引号，哎报错了！SQL注入这不就来了吗，而且是Thinkphp3.2.3![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714106989602-a962d27c-fe31-4e31-b941-4ec423144bda.png#averageHue=%23f8f7f7&clientId=u9bd6feb3-4143-4&from=paste&height=700&id=uf5a29c1a&originHeight=1050&originWidth=1876&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=393457&status=done&style=none&taskId=uac4a21bf-b44c-4056-a616-44c2035cac5&title=&width=1250.6666666666667)
发现报错首先是去找闭合，单引号报错，两个还是一样的报错
仔细查看报错提示，发现存在一个右括号，所以闭合肯定是有括号的
构造payload：/id/325)and('a'='a'.html
正常回显，那下一步肯定是'a'='b![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714107026166-176faebe-bf0d-4f17-a5ea-23b1368afecc.png#averageHue=%23c3c3c0&clientId=u9bd6feb3-4143-4&from=paste&height=166&id=u263a9d79&originHeight=249&originWidth=1771&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=158222&status=done&style=none&taskId=ua7a28976-9a19-40f2-aa55-07b1c2a3425&title=&width=1180.6666666666667)
也正常回显
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714100597084-06a390d8-1e53-4bd3-ab49-5786cb0d5573.png#averageHue=%23b4b5b1&clientId=u21db6f9f-a620-4&from=paste&height=211&id=u5e0d176b&originHeight=316&originWidth=2559&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=54068&status=done&style=none&taskId=u7790239b-9e5a-4cce-a804-84351b46989&title=&width=1706)
**不过没关系，既然有报错，那肯定存在注入，利用工具检测一波**
没检测出来（后面试了sqlmap也不行）
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714100848065-7403cf23-4e0d-4276-be41-b4df65a47a6a.png#averageHue=%23f8f8f8&clientId=u21db6f9f-a620-4&from=paste&height=652&id=ue96dcc5a&originHeight=978&originWidth=1311&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=114481&status=done&style=none&taskId=u64c5a80e-a96e-42b3-9961-98c5460615f&title=&width=874)
那就继续手注，既然正常闭合了，那就改一下后面括号里的就行了
**直接上报错注入**
函数不存在，没关系，换一个
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714100999227-6c7683f0-6ced-4ec9-a95a-37c007d083c6.png#averageHue=%23f9f9f8&clientId=u21db6f9f-a620-4&from=paste&height=1026&id=ua7125bc7&originHeight=1539&originWidth=2559&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=337178&status=done&style=none&taskId=u63117ddb-9d04-4da8-902f-05420053648&title=&width=1706)
哎成功了
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714101079013-0df13d47-1aac-406b-a40e-f05d94253032.png#averageHue=%23fafaf9&clientId=u21db6f9f-a620-4&from=paste&height=1026&id=uf19ee966&originHeight=1539&originWidth=2559&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=322411&status=done&style=none&taskId=ua4d9dffb-5788-465c-82df-242379ba7c1&title=&width=1706)
小小注入，拿下拿下！

**闲来无事，继续找找思路**
因为平时遇到注入都是?id=1的格式
然后就去改了一下
正常回显，哎还真可以![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714107111364-2eef6286-bbd0-4792-b3ae-bc805d49fe5a.png#averageHue=%23969793&clientId=u9bd6feb3-4143-4&from=paste&height=209&id=u1ab7f285&originHeight=313&originWidth=1770&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=61633&status=done&style=none&taskId=u73d0a985-a036-4ac9-9914-8ef1561f28c&title=&width=1180)
加个引号试试
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714107465093-2393120e-6bf1-4739-9ab1-c144fbf24e66.png#averageHue=%23f7f6f6&clientId=u540338d6-bed5-4&from=paste&height=821&id=ue5006378&originHeight=1354&originWidth=2499&originalType=binary&ratio=1.6500000953674316&rotation=0&showTitle=false&size=322611&status=done&style=none&taskId=u80b1eff0-cd19-4b13-a116-586ed77c6fd&title=&width=1514.54536700709)
那么同样利用报错注入，拿下！
![image.png](https://cdn.nlark.com/yuque/0/2024/png/34467383/1714101552156-715bd0b9-d3de-4012-a8e5-f6062bd35ec6.png#averageHue=%23fafafa&clientId=u21db6f9f-a620-4&from=paste&height=403&id=u203845ef&originHeight=604&originWidth=1057&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=178341&status=done&style=none&taskId=u645e3868-d2bc-460b-9cd9-14061272525&title=&width=704.6666666666666)
